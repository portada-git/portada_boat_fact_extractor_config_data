{
    "boatdata.extractor":{
        "constants":{
            "arrival_port":"Barcelona"
        },
        "fields":[
            {"name":"Ship departure date", "field":"ship_departure_date"},
            {"name":"Ship voyage duration", "field":"ship_voyage_duration"},
            {"name":"Ship voyage duration unit", "field":"ship_voyage_duration_unit"},
            {"name":"Ship arrival date", "field":"ship_arrival_date"},
            {"name":"Ship origin", "field":"ship_origin"},
            {"name":"Ship type", "field":"ship_type"},
            {"name":"Ship name", "field":"ship_name"},
            {"name":"Ship tonnage", "field":"ship_tonnage"},
            {"name":"Ship tonnage unit", "field":"ship_tonnage_unit"},
            {"name":"Ship flag", "field":"ship_flag"},
            {"name":"Ship master name", "field":"ship_master_name"},
            {"name":"Ship master role", "field":"ship_master_role"},
            {"name":"Ship cargo", "field":"ship_cargo"}        
        ],
        "config":[
            {
                "approach_type":"regex",
                "configuration":{
                    "main_regex":"flag",
                    "max_groups":15,
                    "fields_to_extract":[
                        {
                            "key":"time_of_arrival",
                            "copy_last_value":true,
                            "default_value":"y"
                        },{
                            "key":"purposeType",
                            "copy_last_value":true,
                            "default_value":"mercante"
                        },{
                            "key":"ship_flag",
                            "copy_last_value":false,
                            "default_value":"????"
                        }
                    ],
                    "fields_to_calculate":[
                        {
                        "key":"time_of_arrival",
                            "calculator":"TimeOfArrivalRelativeToPublicationCalculator",
                            "init_data":["configuration","parser_id"],
                            "fieldParams":["extracted_data.time_of_arrival"]
                        },{
                            "key":"elapsed_days_from_arrival",
                            "calculator":"ElapsedTimeFromArrivalToPublicationCalculator",
                            "fieldParams":["extracted_data.time_of_arrival"]
                        }
                    ]
                }
            },{
                "approach_type":"regex",
                "configuration":{
                    "main_regex":"boat_fact",
                    "max_groups":10,
                    "fields_to_extract":[
                        {
                            "key":"ship_origin",
                            "copy_last_value":false,
                            "default_value":"????"
                        },
                        {
                            "key":"ship_voyage_duration",
                            "copy_last_value":false,
                            "default_value":"??"
                        },
                        {
                            "key":"ship_voyage_duration_unit",
                            "copy_last_value":true,
                            "default_value":"?"
                        },
                        {
                            "key":"ship_type",
                            "copy_last_value":false,
                            "default_value":"????"
                        },
                        {
                            "key":"ship_name",
                            "copy_last_value":false,
                            "default_value":"????"
                        },
                        {
                            "key":"ship_tonnage",
                            "copy_last_value":false,
                            "default_value":"????"
                        },
                        {
                            "key":"ship_tonnage_unit",
                            "copy_last_value":false,
                            "default_value":"t."
                        },
                        {
                            "key":"ship_master_role",
                            "copy_last_value":false,
                            "default_value":"????"
                        },
                        {
                            "key":"ship_master_name",
                            "copy_last_value":false,
                            "default_value":"????"
                        },
                        {
                            "key":"ship_cargo",
                            "copy_last_value":false,
                            "default_value":"????"
                        }
                    ],
                    "fields_to_calculate":[
                        {
                            "key":"ship_arrival_port",
                            "calculator":"DataFromConstantCalculator",
                            "init_data":["constants"],
                            "literalParams":["arrival_port"]
                        },
                        {
                            "key":"ship_port_of_call_place",
                            "calculator":"PortOfCallsFromOriginPortCalculator",
                            "init_data":["configuration","parser_id","extracted_data"],
                            "literalParams":["ship_origin"]
                        },
                        {
                            "key":"ship_voyage_duration",
                            "calculator":"ReplaceIdemByValueCalculator",
                            "init_data":["configuration","parser_id"],
                            "fieldParams":["extracted_data.ship_voyage_duration", "last_extracted_data.ship_voyage_duration"]
                        },
                        {
                            "key":"ship_voyage_duration_unit",
                            "calculator":"ReplaceIdemByValueCalculator",
                            "init_data":["configuration","parser_id"],
                            "fieldParams":["extracted_data.ship_voyage_duration_unit", "last_extracted_data.ship_voyage_duration_unit"]
                        },
                        {
                            "key":"ship_arrival_date",
                            "calculator":"ShipArrivalDateCalculator",
                            "fieldParams":["extracted_data.elapsed_days_from_arrival", "extracted_data.publicationDate"]
                        },
                        {
                            "key":"ship_departure_date",
                            "calculator":"ShipDepartureDateCalculator",
                            "fieldParams":["extracted_data.ship_arrival_date","extracted_data.ship_voyage_duration","extracted_data.ship_voyage_duration_unit"]
                        }                
                    ]

                }
            }
        ]
    }
}